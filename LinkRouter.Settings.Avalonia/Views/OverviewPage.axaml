<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:fa="using:FluentAvalonia.UI.Controls"
             xmlns:conv="clr-namespace:LinkRouter.Settings.Avalonia.Converters"
             x:Class="LinkRouter.Settings.Avalonia.Views.OverviewPage">
    <UserControl.Resources>
        <conv:StringHasValueConverter x:Key="StringHasValueConverter" />
    </UserControl.Resources>
    <ScrollViewer>
        <StackPanel Spacing="16" Margin="24">
            <TextBlock Text="Overview" FontSize="20" FontWeight="SemiBold" />

            <Border Classes="SettingsCard">
                <StackPanel Spacing="12">
                    <TextBlock Text="Configuration" Classes="CardTitle" />
                    <TextBlock Text="Current mappings file location and backup history." Classes="CardDescription" />
                    <TextBlock Text="Path" FontWeight="Medium" />
                    <TextBlock Text="{Binding ConfigPath}" TextWrapping="Wrap" />
                    <TextBlock Text="Last Modified" FontWeight="Medium" />
                    <TextBlock Text="{Binding LastModifiedDisplay}" />
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button Content="Save Config" Command="{Binding SaveCommand}" />
                        <Button Content="Open Folder" Command="{Binding OpenConfigFolderCommand}" />
                        <Button Content="Copy Path" Command="{Binding CopyConfigPathCommand}" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border Classes="SettingsCard">
                <StackPanel Spacing="12">
                    <TextBlock Text="Simulate URL" Classes="CardTitle" />
                    <TextBlock Text="Validate rule evaluation and registration helpers." Classes="CardDescription" />
                    <TextBox Watermark="Enter URL" Text="{Binding TestUrl, Mode=TwoWay}" />
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button Content="Simulate" Command="{Binding SimulateCommand}" />
                        <Button Content="Register" Command="{Binding RegisterCommand}" />
                        <Button Content="Unregister" Command="{Binding UnregisterCommand}" />
                    </StackPanel>
                    <TextBlock Text="{Binding SimulationSummary}" TextWrapping="Wrap" />
                    <TextBlock Text="{Binding SimulationDetails}" TextWrapping="Wrap" />
                </StackPanel>
            </Border>

            <fa:InfoBar Title="Status"
                        IsOpen="{Binding HasError}"
                        Severity="Error"
                        Message="{Binding ErrorMessage}" />

            <fa:InfoBar Title="State"
                        IsOpen="{Binding StatusMessage, Converter={StaticResource StringHasValueConverter}}"
                        Severity="Informational"
                        Message="{Binding StatusMessage}" />
        </StackPanel>
    </ScrollViewer>
</UserControl>
